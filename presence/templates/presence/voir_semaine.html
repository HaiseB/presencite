{% extends "base.html" %}
{% block content %}
<h1 class="heading-xl text-white mb-1">Présences de la semaine</h1>
<div class="table-responsive p-3">
  <table class="table table-bordered table-hover table-striped align-middle bg-white rounded-xl">
    <thead class="table-dark">
      <tr>
        <th scope="col rounded">utilisateur</th>
        {% for jour in jours %}
          <th scope="col">{{ jour|date:"l d/m" }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for ligne in tableau %}
        <tr>
          <td>{{ ligne.user.username }}</td>
          {% for emoji in ligne.jours %}
            <td class="text-center" style="font-size: 1.5em;">{{ emoji }}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% if not semaine_verrouillee %}
    <button class="btn btn-dark">Enregistrer</button>
{% else %}
    <div class="alert alert-success">
        Semaine déjà validée, modification impossible.
    </div>
{% endif %}

<div class="d-flex justify-content-end">
{% if utilisateurs_non_remplis %}
  <div class="card text-white bg-dark mb-3" style="max-width: 20rem;">
  <div class="card-header">Utilisateurs n’ayant pas rempli leurs présences</div>
  <div class="card-body">
    <p class="card-text">
      {% for user in utilisateurs_non_remplis %}
        {{ user.username }}{% if not forloop.last %}, {% endif %}
      {% endfor %}
    </p>
  </div>
  </div>
{% else %}
  <div class="alert alert-success rounded-xl shadow-sm p-4 mt-4">
    🎉 Tous les utilisateurs ont rempli leurs présences ! 🎉
  </div>
{% endif %}
</div>

{% endblock %}
